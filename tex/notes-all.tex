\include{header}
\include{commands}

\include{cc_beamer}
\include{titles}

\usepackage{fancyhdr}

\fancypagestyle{plain}{
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.4pt}}
\fancyfoot[LO,LE]{\thepage}

\makeindex
\begin{document}

\author{Антон Холомьёв}
\title{Учебник по Haskell}

\clearpage{\pagestyle{empty}\clearpage}
\pagestyle{fancy}
\fancyhf{}

\titleGM
\clearpage{\pagestyle{empty}\clearpage}
\renewcommand{\headrulewidth}{0pt}
\Copyleft
\clearpage

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.4pt}
\fancyfoot[LE,RO]{\footfont \thepage}

\shorttableofcontents{Оглавление}{0}
\renewcommand\contentsname{Содержание} % renaming toc
\tableofcontents

\clearpage{\pagestyle{empty}\clearpage}


\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.4pt}

\renewcommand{\chaptermark}[1]{\markboth{#1}{}} 
\fancyfoot[LE]{\footfont \thepage\  |\  \nouppercase{\leftmark{}}}
\fancyfoot[RO]{\footfont \nouppercase{\leftmark{}}\  |\ \thepage}

\include{preface}

\clearpage{\pagestyle{empty}\clearpage}

\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.4pt}

\fancyfoot[LE]{\footfont \thepage\ |\ Глава\ \thechapter:\ \leftmark{}}
\fancyfoot[RO]{\footfont \rightmark{}\ |\ \thepage}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}{}}

%\begin{comment}

\input{1}
\input{2}
\input{3}
\input{4}
\input{5}
\input{6}
\input{7}
\input{8}
\input{9}
\input{10}
\input{11}
\input{12}
\input{13}
\input{14}
\input{15}
\input{16}
\input{17}
\input{18}
\input{19}
\input{20}
\input{21}

\clearpage{\pagestyle{empty}\clearpage}

\pagestyle{fancy}
\fancyhf{}

\renewcommand{\chaptermark}[1]{\markboth{#1}{}} 
\fancyfoot[LE]{\footfont \thepage\  |\  \nouppercase{\leftmark{}}}
\fancyfoot[RO]{\footfont \nouppercase{\rightmark{}}\  |\ \thepage}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.4pt}

\input{appendix}

%\printindex

%\end{comment}
\end{document}
